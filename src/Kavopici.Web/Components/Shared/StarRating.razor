@* Interactive star rating component *@
<div class="star-rating @(ReadOnly ? "readonly" : "interactive")">
    @for (int i = 1; i <= MaxStars; i++)
    {
        var starValue = i;
        <span class="star @(starValue <= Value ? "filled" : "empty") @(starValue <= _hoverValue && !ReadOnly ? "hover" : "")"
              @onclick="() => OnClick(starValue)"
              @onmouseover="() => OnHover(starValue)"
              @onmouseout="OnHoverOut"
              title="@starValue">&#9733;</span>
    }
    @if (Value > 0)
    {
        <span class="star-value">@Value / @MaxStars</span>
    }
</div>

@code {
    private const int MaxStars = 5;

    [Parameter] public int Value { get; set; }
    [Parameter] public EventCallback<int> ValueChanged { get; set; }
    [Parameter] public bool ReadOnly { get; set; }

    private int _hoverValue;

    private async Task OnClick(int star)
    {
        if (ReadOnly) return;
        Value = star;
        await ValueChanged.InvokeAsync(star);
    }

    private void OnHover(int star)
    {
        if (!ReadOnly) _hoverValue = star;
    }

    private void OnHoverOut()
    {
        _hoverValue = 0;
    }
}
